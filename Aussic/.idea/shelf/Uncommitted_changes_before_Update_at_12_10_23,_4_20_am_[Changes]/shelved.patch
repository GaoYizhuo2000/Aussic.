Index: app/src/main/java/au/edu/anu/Aussic/controller/songPages/SongActivity.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package au.edu.anu.Aussic.controller.songPages;\n\nimport androidx.appcompat.app.AppCompatActivity;\nimport androidx.recyclerview.widget.LinearLayoutManager;\nimport androidx.recyclerview.widget.RecyclerView;\n\nimport android.app.Dialog;\nimport android.content.Intent;\nimport android.graphics.Color;\nimport android.graphics.drawable.ColorDrawable;\nimport android.media.MediaPlayer;\nimport android.os.Bundle;\nimport android.view.Gravity;\nimport android.view.KeyEvent;\nimport android.view.View;\nimport android.view.ViewGroup;\nimport android.view.Window;\nimport android.view.animation.AnimationUtils;\nimport android.view.inputmethod.EditorInfo;\nimport android.widget.Button;\nimport android.widget.EditText;\nimport android.widget.ImageView;\nimport android.widget.TextView;\nimport android.widget.Toast;\n\nimport com.bumptech.glide.Glide;\nimport com.bumptech.glide.request.RequestOptions;\n\nimport java.util.ArrayList;\nimport java.util.List;\n\nimport au.edu.anu.Aussic.R;\nimport au.edu.anu.Aussic.controller.homePages.Adapter.CardAdapter;\nimport au.edu.anu.Aussic.controller.homePages.Adapter.CommentAdapter;\nimport au.edu.anu.Aussic.controller.homePages.Adapter.CommentItem;\nimport au.edu.anu.Aussic.models.observer.MediaObserver;\n\npublic class SongActivity extends AppCompatActivity {\n    private ImageView roundImageView;\n    private TextView nameText;\n    private TextView artistText;\n    private ImageView play;\n    private ImageView like;\n    private ImageView fav;\n    private ImageView comment;\n\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_song);\n\n        this.roundImageView = findViewById(R.id.song_spinning_round_image);\n        this.nameText = findViewById(R.id.song_song_name);\n        this.artistText = findViewById(R.id.song_artist_name);\n        this.play = findViewById(R.id.song_fab);\n        this.like = findViewById(R.id.song_like);\n        this.fav = findViewById(R.id.song_fav);\n        this.comment = findViewById(R.id.song_comment);\n\n        if (MediaObserver.getCurrentSong() != null)\n        setTheSong(CardAdapter.makeImageUrl(200, 200, MediaObserver.getCurrentSong().getUrlToImage()), MediaObserver.getCurrentSong().getSongName(), MediaObserver.getCurrentSong().getArtistName());\n\n        if(MediaObserver.getCurrentMediaPlayer().isPlaying()) this.play.setImageResource(R.drawable.ic_song_pause);\n        this.play.setOnClickListener(new View.OnClickListener() {\n            @Override\n            public void onClick(View v) {\n\n                if (MediaObserver.getCurrentMediaPlayer() != null) {\n                    if (MediaObserver.getCurrentMediaPlayer().isPlaying()) {\n                        MediaObserver.getCurrentMediaPlayer().pause();\n                        play.setImageResource(R.drawable.ic_song_play);\n                        roundImageView.clearAnimation();\n                        MediaObserver.notifyListeners();\n                    } else {\n                        MediaObserver.getCurrentMediaPlayer().start();\n                        play.setImageResource(R.drawable.ic_song_pause);\n                        roundImageView.startAnimation(AnimationUtils.loadAnimation(SongActivity.this, R.anim.spinning));\n                        MediaObserver.notifyListeners();\n                    }\n                }\n            }\n        });\n\n        this.like.setOnClickListener(new View.OnClickListener() {\n            @Override\n            public void onClick(View v){\n                like.setImageResource(R.drawable.ic_song_like);\n            }\n        });\n\n        this.fav.setOnClickListener(new View.OnClickListener() {\n            @Override\n            public void onClick(View v){\n                fav.setImageResource(R.drawable.ic_song_fav);\n            }\n        });\n        this.comment.setOnClickListener(new View.OnClickListener() {\n            @Override\n            public void onClick(View v){\n                showBottomComments();\n            }\n        });\n\n\n\n\n\n\n    }\n\n    private void setTheSong(String imageUrl,String songName, String artistName){\n\n        Glide.with(this)\n                .load(imageUrl)\n                .apply(new RequestOptions().override((int)(1200 * 0.8), (int)(1200 * 0.8)))\n                .circleCrop()\n                .into(this.roundImageView);\n        if(MediaObserver.getCurrentMediaPlayer().isPlaying())   this.roundImageView.startAnimation(AnimationUtils.loadAnimation(this, R.anim.spinning));\n        else this.roundImageView.clearAnimation();\n        nameText.setText(CardAdapter.adjustLength(songName));\n        artistText.setText(CardAdapter.adjustLength(artistName));\n    }\n\n    private void showBottomComments() {\n        final Dialog dialog = new Dialog(this);\n        dialog.requestWindowFeature(Window.FEATURE_NO_TITLE);\n        dialog.setContentView(R.layout.layout_comments);  // This is the layout for the comments.\n\n        // Views from the comments layout\n        EditText commentInput = dialog.findViewById(R.id.song_comment_input);\n        RecyclerView commentsRecyclerView = dialog.findViewById(R.id.rv_comments_list);\n        // If you have a RecyclerView adapter, initialize it here and set it to the RecyclerView\n\n        // We'll use the EditText's 'imeOptions' for the comment submission.\n        // First, set the EditText's IME action label to \"Submit\" and actionId to actionSend in the XML.\n        commentInput.setOnEditorActionListener(new TextView.OnEditorActionListener() {\n            @Override\n            public boolean onEditorAction(TextView v, int actionId, KeyEvent event) {\n                if (actionId == EditorInfo.IME_ACTION_SEND) {\n                    // Handle the comment submission here.\n                    String commentText = commentInput.getText().toString().trim();\n                    if (!commentText.isEmpty()) {\n                        // Add the comment to your comments list, update the RecyclerView, etc.\n                        dialog.dismiss();\n                    } else {\n                        Toast.makeText(SongActivity.this, \"Please enter a comment\", Toast.LENGTH_SHORT).show();\n                    }\n                    return true;\n                }\n                return false;\n            }\n        });\n\n        // Your data list for the comments\n        List<CommentItem> commentList = new ArrayList<>();\n\n        // Setup the RecyclerView and its adapter\n\n        CommentAdapter commentAdapter = new CommentAdapter(commentList);\n        commentsRecyclerView.setAdapter(commentAdapter);\n        commentsRecyclerView.setLayoutManager(new LinearLayoutManager(this));\n\n        // Find and set an OnClickListener to the button\n        Button sendButton = dialog.findViewById(R.id.the_btn_send);\n        sendButton.setOnClickListener(new View.OnClickListener() {\n            @Override\n            public void onClick(View v) {\n                // Retrieve the comment from the EditText\n                String commentText = commentInput.getText().toString().trim();\n\n\n                if (!commentText.isEmpty()) {\n                    // Create a new CommentItem object and add it to the commentList\n                    // Assuming CommentItem is a class that represents a comment with user avatar, name, and content\n                    CommentItem newComment = new CommentItem(0, \"Admin\", commentText);\n                    commentList.add(newComment);\n\n                    // Notify the adapter that an item was added to the end of the list\n                    commentAdapter.notifyItemInserted(commentList.size() - 1);\n\n                    // Optional: Clear the EditText after sending the comment\n                    commentInput.setText(\"\");\n\n                    // Optional: Scroll the RecyclerView to show the new comment\n                    commentsRecyclerView.smoothScrollToPosition(commentList.size() - 1);\n                } else {\n                    Toast.makeText(SongActivity.this, \"Please enter a comment\", Toast.LENGTH_SHORT).show();\n                }\n            }\n        });\n\n        // If you want an additional UI element, like a close/cancel button, you can implement it similar to before:\n        // ImageView cancelButton = dialog.findViewById(R.id.cancelButton);\n        // cancelButton.setOnClickListener(new View.OnClickListener() {...}\n//        sendButton.setOnClickListener(new View.OnClickListener() {\n//            @Override\n//            public void onClick(View v) {\n//                String commentText = commentInput.getText().toString().trim();\n//                if (!commentText.isEmpty()) {\n//                    // Handle the comment submission, e.g., add the comment to your comments list, update the RecyclerView, etc.\n//                    dialog.dismiss();\n//                } else {\n//                    Toast.makeText(SongActivity.this, \"Please enter a comment\", Toast.LENGTH_SHORT).show();\n//                }\n//            }\n//        });\n\n        dialog.show();\n\n        // Set the dimensions and appearance of the dialog\n        dialog.getWindow().setLayout(ViewGroup.LayoutParams.MATCH_PARENT, ViewGroup.LayoutParams.WRAP_CONTENT);\n        dialog.getWindow().setBackgroundDrawable(new ColorDrawable(Color.TRANSPARENT));\n        dialog.getWindow().getAttributes().windowAnimations = R.style.DialogAnimation;\n        dialog.getWindow().setGravity(Gravity.BOTTOM);\n\n        // Allow the dialog to be canceled by touching outside its bounds\n        dialog.setCancelable(true);\n        dialog.setCanceledOnTouchOutside(true);\n    }\n\n}
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/java/au/edu/anu/Aussic/controller/songPages/SongActivity.java b/app/src/main/java/au/edu/anu/Aussic/controller/songPages/SongActivity.java
--- a/app/src/main/java/au/edu/anu/Aussic/controller/songPages/SongActivity.java	(revision 92980bfca49c155dad6f77ae5717f9a77e8716aa)
+++ b/app/src/main/java/au/edu/anu/Aussic/controller/songPages/SongActivity.java	(date 1697026478117)
@@ -33,6 +33,8 @@
 import au.edu.anu.Aussic.controller.homePages.Adapter.CardAdapter;
 import au.edu.anu.Aussic.controller.homePages.Adapter.CommentAdapter;
 import au.edu.anu.Aussic.controller.homePages.Adapter.CommentItem;
+import au.edu.anu.Aussic.models.firebase.FirestoreDao;
+import au.edu.anu.Aussic.models.firebase.FirestoreDaoImpl;
 import au.edu.anu.Aussic.models.observer.MediaObserver;
 
 public class SongActivity extends AppCompatActivity {
@@ -92,7 +94,10 @@
         this.fav.setOnClickListener(new View.OnClickListener() {
             @Override
             public void onClick(View v){
+                FirestoreDao firestoreDao = new FirestoreDaoImpl();
+                firestoreDao.updateUserFavorites(MediaObserver.getCurrentSong().getId());
                 fav.setImageResource(R.drawable.ic_song_fav);
+
             }
         });
         this.comment.setOnClickListener(new View.OnClickListener() {
@@ -190,21 +195,7 @@
             }
         });
 
-        // If you want an additional UI element, like a close/cancel button, you can implement it similar to before:
-        // ImageView cancelButton = dialog.findViewById(R.id.cancelButton);
-        // cancelButton.setOnClickListener(new View.OnClickListener() {...}
-//        sendButton.setOnClickListener(new View.OnClickListener() {
-//            @Override
-//            public void onClick(View v) {
-//                String commentText = commentInput.getText().toString().trim();
-//                if (!commentText.isEmpty()) {
-//                    // Handle the comment submission, e.g., add the comment to your comments list, update the RecyclerView, etc.
-//                    dialog.dismiss();
-//                } else {
-//                    Toast.makeText(SongActivity.this, "Please enter a comment", Toast.LENGTH_SHORT).show();
-//                }
-//            }
-//        });
+
 
         dialog.show();
 
Index: app/src/main/java/au/edu/anu/Aussic/models/observer/ChangeListener.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package au.edu.anu.Aussic.models.observer;\n\n\npublic interface ChangeListener {\n    void onChange();\n}\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/java/au/edu/anu/Aussic/models/observer/ChangeListener.java b/app/src/main/java/au/edu/anu/Aussic/models/observer/ChangeListener.java
--- a/app/src/main/java/au/edu/anu/Aussic/models/observer/ChangeListener.java	(revision 92980bfca49c155dad6f77ae5717f9a77e8716aa)
+++ b/app/src/main/java/au/edu/anu/Aussic/models/observer/ChangeListener.java	(date 1697030056083)
@@ -3,4 +3,5 @@
 
 public interface ChangeListener {
     void onChange();
+
 }
Index: app/src/main/java/au/edu/anu/Aussic/models/entity/User.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package au.edu.anu.Aussic.models.entity;\n\n\nimport java.util.ArrayList;\nimport java.util.List;\n\n//用户注册后新建user上传firestore\n//登陆之后把用户id传给homeactivity，实例化个人主页fragment的时候再传，然后在fragment初始化的时候根据用户id从firebastore获取用户信息展示出来\npublic class User {\n    String username;\n    List<String> favorites = new ArrayList<>(); //放歌曲id\n    String location = \"\";\n    String iconUrl;\n\n    public User(String username, String iconUrl) {\n        this.username = username;\n        this.iconUrl = iconUrl;\n    }\n\n    public void update(){};  //更新数据库里的user数据\n\n}\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/java/au/edu/anu/Aussic/models/entity/User.java b/app/src/main/java/au/edu/anu/Aussic/models/entity/User.java
--- a/app/src/main/java/au/edu/anu/Aussic/models/entity/User.java	(revision 92980bfca49c155dad6f77ae5717f9a77e8716aa)
+++ b/app/src/main/java/au/edu/anu/Aussic/models/entity/User.java	(date 1697020866471)
@@ -4,6 +4,7 @@
 import java.util.ArrayList;
 import java.util.List;
 
+
 //用户注册后新建user上传firestore
 //登陆之后把用户id传给homeactivity，实例化个人主页fragment的时候再传，然后在fragment初始化的时候根据用户id从firebastore获取用户信息展示出来
 public class User {
Index: app/src/main/java/au/edu/anu/Aussic/controller/homePages/HomeActivity.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package au.edu.anu.Aussic.controller.homePages;\n\nimport androidx.appcompat.app.ActionBarDrawerToggle;\nimport androidx.appcompat.app.AppCompatActivity;\nimport androidx.appcompat.widget.SearchView;\nimport androidx.appcompat.widget.Toolbar;\nimport androidx.core.view.GravityCompat;\nimport androidx.drawerlayout.widget.DrawerLayout;\n\nimport android.content.Intent;\nimport android.media.MediaPlayer;\nimport android.os.Bundle;\nimport android.os.Handler;\nimport android.view.Gravity;\n\nimport com.google.android.material.bottomnavigation.BottomNavigationView;\nimport com.google.android.material.floatingactionbutton.FloatingActionButton;\nimport com.google.android.material.navigation.NavigationView;\nimport com.google.firebase.database.core.view.Change;\nimport com.google.gson.Gson;\nimport com.google.gson.JsonArray;\nimport com.google.gson.JsonObject;\nimport com.google.gson.JsonParser;\n\n\nimport androidx.fragment.app.Fragment;\nimport androidx.fragment.app.FragmentManager;\nimport androidx.fragment.app.FragmentTransaction;\n\nimport android.app.Dialog;\nimport android.graphics.Color;\nimport android.graphics.drawable.ColorDrawable;\nimport android.view.View;\nimport android.view.ViewGroup;\nimport android.view.Window;\nimport android.view.animation.AnimationUtils;\nimport android.widget.ImageView;\nimport android.widget.LinearLayout;\nimport android.widget.Toast;\n\nimport java.io.InputStreamReader;\n\nimport au.edu.anu.Aussic.R;\nimport au.edu.anu.Aussic.controller.homePages.Adapter.CardAdapter;\nimport au.edu.anu.Aussic.controller.searchPages.SearchActivity;\nimport au.edu.anu.Aussic.models.observer.ChangeListener;\nimport au.edu.anu.Aussic.models.observer.MediaObserver;\nimport au.edu.anu.Aussic.models.firebase.FirestoreDao;\nimport au.edu.anu.Aussic.models.firebase.FirestoreDaoImpl;\nimport au.edu.anu.Aussic.models.SongLoader.GsonSongLoader;\nimport au.edu.anu.Aussic.models.userAction.UserAction;\nimport au.edu.anu.Aussic.models.userAction.UserActionFactory;\n\n\n\npublic class HomeActivity extends AppCompatActivity implements ChangeListener {\n\n    FloatingActionButton fab;\n    DrawerLayout drawerLayout;\n    BottomNavigationView bottomNavigationView;\n    NavigationView navigationView;\n    private HomeFragment homeFragment = new HomeFragment();\n    private ShortsFragment shortsFragment= new ShortsFragment();\n    private SubscriptionsFragment subscriptionsFragment = new SubscriptionsFragment();\n    private UserPageFragment userPageFragment = new UserPageFragment();\n    private FavoritesFragment favoritesFragment = new FavoritesFragment();\n    private Handler timerHandler = new Handler();\n    private JsonObject jsonObject = null;\n    private JsonArray jsonArray;\n    private int arrayLength = 0;\n    private int currentID = 0;\n    public int currentFragment = R.id.home;\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_home);\n        MediaObserver.homeActivity = this;\n        MediaObserver.addChangeListener(this);\n\n        bottomNavigationView = findViewById(R.id.bottomNavigationView);\n        fab =findViewById(R.id.fab);\n        drawerLayout = findViewById(R.id.drawer_layout);\n        navigationView = findViewById(R.id.nav_view);\n        Toolbar toolbar = findViewById(R.id.toolbar);\n\n\n\n        SearchView searchView = findViewById(R.id.searchView);\n\n        // Set an OnClickListener on the SearchView\n        searchView.setOnClickListener(new View.OnClickListener() {\n            @Override\n            public void onClick(View v) {\n                // Start the SearchActivity\n                Intent intent = new Intent(HomeActivity.this, SearchActivity.class);\n                startActivity(intent);\n            }\n        });\n        // Set the OnClickListener for all children views of SearchView\n        setOnClickListenerForAllChildren(searchView, new View.OnClickListener() {\n            @Override\n            public void onClick(View v) {\n                Intent intent = new Intent(HomeActivity.this, SearchActivity.class);\n                startActivity(intent);\n            }\n        });\n\n\n        setSupportActionBar(toolbar);\n        ActionBarDrawerToggle toggle = new ActionBarDrawerToggle(this, drawerLayout, toolbar, R.string.open_nav,R.string.close_nav);\n        drawerLayout.addDrawerListener(toggle);\n        toggle.syncState();\n\n        if(savedInstanceState == null){\n            getSupportFragmentManager().beginTransaction().replace(R.id.fragment_layout, homeFragment).commit();\n            navigationView.setCheckedItem(R.id.nav_home);\n        }\n\n        replaceFragment(homeFragment);\n\n        bottomNavigationView.setBackground(null);\n        bottomNavigationView.setOnItemSelectedListener(item -> {\n\n            currentFragment = item.getItemId();\n\n                if(item.getItemId() == R.id.home) replaceFragment(homeFragment);\n\n                else if(item.getItemId() == R.id.shorts) replaceFragment(shortsFragment);\n\n                else if(item.getItemId() == R.id.subscriptions) replaceFragment(subscriptionsFragment);\n\n                else if(item.getItemId() == R.id.library) replaceFragment(userPageFragment);\n\n            return true;\n        });\n\n        navigationView.setNavigationItemSelectedListener(menuItem -> {\n            // Closing the drawer after selecting\n            currentFragment = menuItem.getItemId();\n            drawerLayout.closeDrawer(GravityCompat.START);\n            if(menuItem.getItemId() == R.id.nav_home) replaceFragment(homeFragment);\n            else if (menuItem.getItemId() == R.id.nav_favorites) replaceFragment(favoritesFragment);\n            else if(menuItem.getItemId() == R.id.nav_settings) {\n                //TODO:test\n\n            }\n            else if(menuItem.getItemId() == R.id.nav_share) replaceFragment(subscriptionsFragment);\n            else if(menuItem.getItemId() == R.id.nav_about) replaceFragment(userPageFragment);\n\n            return true;\n        });\n\n        FirestoreDao firestoreDao = new FirestoreDaoImpl();\n        firestoreDao.getRandomSongs(1).thenAccept(results ->{\n            MediaObserver.setCurrentSong(GsonSongLoader.loadSong(results.get(0)));\n            MediaObserver.setMediaPlayer(new MediaPlayer());\n            String urlImage = CardAdapter.makeImageUrl(200, 200, MediaObserver.getCurrentSong().getUrlToImage());\n\n\n            try{\n                MediaObserver.getCurrentMediaPlayer().setDataSource(MediaObserver.getCurrentSong().getUrlToListen());\n                MediaObserver.getCurrentMediaPlayer().prepare();\n                MediaObserver.getCurrentMediaPlayer().setLooping(true);\n                //mediaPlayer.setVolume(1.0f,1.0f);\n            } catch (Exception e){\n                e.printStackTrace();\n            }\n            MediaObserver.getCurrentMediaPlayer().start();\n            fab.setImageResource(R.drawable.ic_bottom_stop);\n            MediaObserver.notifyListeners();\n        });\n\n\n\n        fab.setOnClickListener(new View.OnClickListener() {\n            @Override\n            public void onClick(View view) {\n                if (MediaObserver.getCurrentMediaPlayer() != null) {\n                    if (MediaObserver.getCurrentMediaPlayer().isPlaying()) {\n                        MediaObserver.getCurrentMediaPlayer().pause();\n                        fab.setImageResource(R.drawable.ic_bottom_play);\n                        if(MediaObserver.roundImage != null) MediaObserver.roundImage.clearAnimation();\n                    } else {\n                        MediaObserver.getCurrentMediaPlayer().start();\n                        fab.setImageResource(R.drawable.ic_bottom_stop);\n                        if((currentFragment == R.id.home || currentFragment == R.id.nav_home) && MediaObserver.roundImage != null) MediaObserver.roundImage.startAnimation(AnimationUtils.loadAnimation(homeFragment.getContext(), R.anim.spinning));\n                    }\n                    //showBottomDialog();\n                }\n            }\n        });\n\n        loadJsonObjectFromRawResource(R.raw.useractions);\n        timerHandler.postDelayed(timerRunnable, 10000);\n    }\n    // Outside Oncreate\n    private void replaceFragment(Fragment fragment) {\n        FragmentManager fragmentManager = getSupportFragmentManager();\n        FragmentTransaction fragmentTransaction = fragmentManager.beginTransaction();\n        fragmentTransaction.replace(R.id.fragment_layout, fragment);\n        fragmentTransaction.commit();\n    }\n\n    private void showBottomDialog() {\n\n        final Dialog dialog = new Dialog(this);\n        dialog.requestWindowFeature(Window.FEATURE_NO_TITLE);\n        dialog.setContentView(R.layout.bottomsheetlayout);\n\n        LinearLayout videoLayout = dialog.findViewById(R.id.layoutVideo);\n        LinearLayout shortsLayout = dialog.findViewById(R.id.layoutShorts);\n        LinearLayout liveLayout = dialog.findViewById(R.id.layoutLive);\n        ImageView cancelButton = dialog.findViewById(R.id.cancelButton);\n\n        videoLayout.setOnClickListener(new View.OnClickListener() {\n            @Override\n            public void onClick(View v) {\n\n                dialog.dismiss();\n                Toast.makeText(HomeActivity.this,\"Upload a Video is clicked\",Toast.LENGTH_SHORT).show();\n\n            }\n        });\n\n        shortsLayout.setOnClickListener(new View.OnClickListener() {\n            @Override\n            public void onClick(View v) {\n\n                dialog.dismiss();\n                Toast.makeText(HomeActivity.this,\"Create a short is Clicked\",Toast.LENGTH_SHORT).show();\n\n            }\n        });\n\n        liveLayout.setOnClickListener(new View.OnClickListener() {\n            @Override\n            public void onClick(View v) {\n\n                dialog.dismiss();\n                Toast.makeText(HomeActivity.this,\"Go live is Clicked\",Toast.LENGTH_SHORT).show();\n\n            }\n        });\n\n        cancelButton.setOnClickListener(new View.OnClickListener() {\n            @Override\n            public void onClick(View view) {\n                dialog.dismiss();\n            }\n        });\n\n        dialog.show();\n        dialog.getWindow().setLayout(ViewGroup.LayoutParams.MATCH_PARENT,ViewGroup.LayoutParams.WRAP_CONTENT);\n        dialog.getWindow().setBackgroundDrawable(new ColorDrawable(Color.TRANSPARENT));\n        dialog.getWindow().getAttributes().windowAnimations = R.style.DialogAnimation;\n        dialog.getWindow().setGravity(Gravity.BOTTOM);\n\n    }\n\n    private Runnable timerRunnable = new Runnable() {\n        @Override\n        public void run() {\n            // load show user behavior every 10 secs\n            loadShowData();\n\n            // Schedule the next execution\n            timerHandler.postDelayed(this, 5000);\n        }\n    };\n    public void loadJsonObjectFromRawResource(int resourceId) {\n        try {\n            // Open the resource stream\n            InputStreamReader reader = new InputStreamReader(getResources().openRawResource(resourceId));\n\n            // Parse the string content to a JsonObject using Gson\n            jsonArray = JsonParser.parseReader(reader).getAsJsonArray();\n            arrayLength = jsonArray.size();\n\n        } catch (Exception e) {\n            e.printStackTrace();\n        }\n    }\n\n    private void loadShowData() {\n        FirestoreDao firestoreDao = new FirestoreDaoImpl();\n        firestoreDao.getRandomUseraction().thenAccept(useraction -> {\n            Gson gson = new Gson();\n            JsonObject jsonObject = gson.toJsonTree(useraction).getAsJsonObject();\n            UserAction userAction = UserActionFactory.createUserAction(jsonObject);\n            userAction.update();\n           // Toast.makeText(this, userAction.getToastMessage(), Toast.LENGTH_SHORT).show();\n\n        });\n    }\n\n\n    @Override\n    protected void onDestroy() {\n        super.onDestroy();\n        if(MediaObserver.getCurrentMediaPlayer() != null){\n            MediaObserver.getCurrentMediaPlayer().release();\n            MediaObserver.setMediaPlayer(null);\n        }\n    }\n\n    private void setOnClickListenerForAllChildren(View parent, View.OnClickListener listener) {\n        if (!(parent instanceof ViewGroup)) {\n            return;\n        }\n        ViewGroup viewGroup = (ViewGroup) parent;\n        for (int i = 0; i < viewGroup.getChildCount(); i++) {\n            View child = viewGroup.getChildAt(i);\n            child.setOnClickListener(listener);\n            setOnClickListenerForAllChildren(child, listener);\n        }\n    }\n\n    @Override\n    public void onChange() {\n        if(MediaObserver.getCurrentMediaPlayer() != null){\n            if ((MediaObserver.getCurrentMediaPlayer().isPlaying())) this.fab.setImageResource(R.drawable.ic_bottom_stop);\n            else this.fab.setImageResource(R.drawable.ic_bottom_play);\n        }\n    }\n}
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/java/au/edu/anu/Aussic/controller/homePages/HomeActivity.java b/app/src/main/java/au/edu/anu/Aussic/controller/homePages/HomeActivity.java
--- a/app/src/main/java/au/edu/anu/Aussic/controller/homePages/HomeActivity.java	(revision 92980bfca49c155dad6f77ae5717f9a77e8716aa)
+++ b/app/src/main/java/au/edu/anu/Aussic/controller/homePages/HomeActivity.java	(date 1697033035632)
@@ -68,24 +68,21 @@
     private JsonObject jsonObject = null;
     private JsonArray jsonArray;
     private int arrayLength = 0;
-    private int currentID = 0;
     public int currentFragment = R.id.home;
 
     @Override
     protected void onCreate(Bundle savedInstanceState) {
         super.onCreate(savedInstanceState);
         setContentView(R.layout.activity_home);
+
         MediaObserver.homeActivity = this;
         MediaObserver.addChangeListener(this);
-
         bottomNavigationView = findViewById(R.id.bottomNavigationView);
         fab =findViewById(R.id.fab);
         drawerLayout = findViewById(R.id.drawer_layout);
         navigationView = findViewById(R.id.nav_view);
         Toolbar toolbar = findViewById(R.id.toolbar);
 
-
-
         SearchView searchView = findViewById(R.id.searchView);
 
         // Set an OnClickListener on the SearchView
Index: app/src/main/java/au/edu/anu/Aussic/models/observer/MediaObserver.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package au.edu.anu.Aussic.models.observer;\n\nimport android.media.MediaPlayer;\nimport android.widget.ImageView;\n\nimport java.util.ArrayList;\nimport java.util.List;\n\nimport au.edu.anu.Aussic.controller.homePages.HomeActivity;\nimport au.edu.anu.Aussic.controller.homePages.HomeFragment;\nimport au.edu.anu.Aussic.models.entity.Song;\n\n/**\n * The class for song playing and pausing\n */\npublic class MediaObserver {\n    private static MediaPlayer currentMediaPlayer;\n    private static Song currentSong;\n    public static ImageView roundImage;\n    public static HomeFragment homeFragment;\n    public static HomeActivity homeActivity;\n    private static List<Song> currentSongList = new ArrayList<>();\n    private static List<ChangeListener> listeners = new ArrayList<>();\n    public static void setMediaPlayer(MediaPlayer mediaPlayer){\n        currentMediaPlayer = mediaPlayer;\n        notifyListeners();\n    }\n    public static void setCurrentSong(Song song){\n        currentSong = song;\n    }\n\n    public static MediaPlayer getCurrentMediaPlayer() {\n        return currentMediaPlayer;\n    }\n\n    public static Song getCurrentSong() {\n        return currentSong;\n    }\n    public static List<Song> getCurrentSongList(){return currentSongList; }\n\n    public static void addChangeListener(ChangeListener newListener) {\n        listeners.add(newListener);\n    }\n\n    public static void removeChangeListener(ChangeListener listenerToRemove) {\n        listeners.remove(listenerToRemove);\n    }\n\n    public static void notifyListeners() {\n        for (ChangeListener listener : listeners) listener.onChange();\n    }\n}\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/java/au/edu/anu/Aussic/models/observer/MediaObserver.java b/app/src/main/java/au/edu/anu/Aussic/models/observer/MediaObserver.java
--- a/app/src/main/java/au/edu/anu/Aussic/models/observer/MediaObserver.java	(revision 92980bfca49c155dad6f77ae5717f9a77e8716aa)
+++ b/app/src/main/java/au/edu/anu/Aussic/models/observer/MediaObserver.java	(date 1697024727171)
@@ -48,5 +48,8 @@
 
     public static void notifyListeners() {
         for (ChangeListener listener : listeners) listener.onChange();
+    }
+    public static void realTimeNotifyListeners(){
+
     }
 }
Index: .idea/misc.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><project version=\"4\">\n  <component name=\"MarkdownSettingsMigration\">\n    <option name=\"stateVersion\" value=\"1\" />\n  </component>\n  <component name=\"ProjectRootManager\" version=\"2\" languageLevel=\"JDK_17\" default=\"true\" project-jdk-name=\"jbr-17\" project-jdk-type=\"JavaSDK\">\n    <output url=\"file://$PROJECT_DIR$/build/classes\" />\n  </component>\n  <component name=\"ProjectType\">\n    <option name=\"id\" value=\"Android\" />\n  </component>\n</project>
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/.idea/misc.xml b/.idea/misc.xml
--- a/.idea/misc.xml	(revision 92980bfca49c155dad6f77ae5717f9a77e8716aa)
+++ b/.idea/misc.xml	(date 1697044773168)
@@ -1,4 +1,7 @@
 <project version="4">
+  <component name="JavadocGenerationManager">
+    <option name="OUTPUT_DIRECTORY" value="$PROJECT_DIR$/../../../ga-23s2/Aussic" />
+  </component>
   <component name="MarkdownSettingsMigration">
     <option name="stateVersion" value="1" />
   </component>
